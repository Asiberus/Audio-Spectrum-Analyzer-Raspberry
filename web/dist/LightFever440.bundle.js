window.LightFever440=function(){"use strict";var t={872:function(t,e){function i(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._dom={toggle:document.getElementById("toggle-light-fever"),manual:document.getElementById("manual-mode"),analyzer:document.getElementById("analyzer-mode"),selection:document.getElementById("selection-border"),manualContainer:document.getElementById("manual-container"),autoContainer:document.getElementById("auto-container"),themeSwitch:document.getElementById("theme-switch")},this._isActive=!1,this._isDark=!0,this._state="OFF",this._mode="MANUAL",this._effect=null,this._options=null,this._events()}var e,s;return e=t,(s=[{key:"_events",value:function(){this._dom.toggle.addEventListener("click",this._toggleLightFever.bind(this)),this._dom.manual.addEventListener("click",this._switchMode.bind(this)),this._dom.analyzer.addEventListener("click",this._switchMode.bind(this)),this._dom.themeSwitch.addEventListener("click",this._switchTheme.bind(this))}},{key:"_toggleLightFever",value:function(){!1===this._isActive?(this._isActive=!0,this._dom.toggle.innerHTML="ON",this._dom.toggle.classList.remove("light-fever-off"),this._dom.toggle.classList.add("light-fever-on"),this._startLightFever()):(this._isActive=!1,this._dom.toggle.innerHTML="OFF",this._dom.toggle.classList.remove("light-fever-on"),this._dom.toggle.classList.add("light-fever-off"),this._stopLightFever())}},{key:"_startLightFever",value:function(){this._state="ON",this.sendAction()}},{key:"_stopLightFever",value:function(){this._state="OFF",this.sendAction()}},{key:"_switchMode",value:function(t){"false"===t.target.dataset.manual?(this._dom.manual.classList.remove("selected"),this._dom.analyzer.classList.add("selected"),this._dom.selection.style.left="50%",this._dom.manualContainer.style.left="-100%",this._dom.autoContainer.style.left="0",this._mode="AUDIO_ANALYSE"):(this._dom.analyzer.classList.remove("selected"),this._dom.manual.classList.add("selected"),this._dom.selection.style.left="0",this._dom.manualContainer.style.left="0",this._dom.autoContainer.style.left="100%",this._mode="MANUAL"),this.sendAction()}},{key:"_switchTheme",value:function(t){!0===t.target.checked?(this._isDark=!1,document.body.classList.remove("dark-theme"),document.body.classList.add("light-theme")):(this._isDark=!0,document.body.classList.remove("light-theme"),document.body.classList.add("dark-theme"))}},{key:"sendAction",value:function(){this.ajax({state:this._state,mode:this._mode,effect:this._effect,options:this._options}).then((function(t){console.log(t)})).catch((function(t){console.error(t)}))}},{key:"ajax",value:function(t){return new Promise((function(e,i){var s={method:"POST",headers:new Headers([["Content-Type","application/json; charset=UTF-8"],["Accept","application/json"]]),body:JSON.stringify(t)};fetch("action",s).then((function(t){t?t.ok?e(t.json()):i("ERROR_".concat(t.status)):i("ERROR_MISSING_ARGUMENT")}))}))}}])&&i(e.prototype,s),t}();e.default=s}},e={};return function i(s){if(e[s])return e[s].exports;var n=e[s]={exports:{}};return t[s](n,n.exports,i),n.exports}(872)}().default;